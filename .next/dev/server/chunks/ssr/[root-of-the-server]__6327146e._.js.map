{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tosib/Downloads/billing-main/billing-main/src/pages/report.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport jsPDF from \"jspdf\"\r\n\r\nimport {\r\n  PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, Tooltip\r\n} from \"recharts\"\r\n\r\nexport default function Report() {\r\n  const [data,setData] = useState<any>()\r\n\r\n  useEffect(()=>{\r\n    fetch(\"/api/sales-today\")\r\n      .then(r=>r.json())\r\n      .then(setData)\r\n  },[])\r\n\r\n  if(!data) return <h2 style={{padding:40}}>Loading dashboard...</h2>\r\n\r\n  const paymentData = [\r\n    { name:\"Cash\", value:data.cashTotal },\r\n    { name:\"UPI\", value:data.upiTotal }\r\n  ]\r\n\r\n  const salesData = [\r\n    { name:\"Week\", sales:data.weekTotal },\r\n    { name:\"Month\", sales:data.monthTotal }\r\n  ]\r\nconst exportPDF = () => {\r\n  const doc = new jsPDF()\r\n\r\n  let y = 20\r\n\r\n  doc.setFontSize(16)\r\n  doc.text(\"ICE SPOT DAILY REPORT\", 20, y)\r\n\r\n  y += 15\r\n  doc.setFontSize(12)\r\n\r\n  doc.text(`Today Sales: Rs ${data.todayTotal}`, 20, y); y+=10\r\n  doc.text(`Total Bills: ${data.todayBills}`, 20, y); y+=10\r\n  doc.text(`Cash Sales: Rs ${data.cashTotal}`, 20, y); y+=10\r\n  doc.text(`UPI Sales: Rs ${data.upiTotal}`, 20, y); y+=20\r\n\r\n  doc.text(\"Top Selling Items:\", 20, y); y+=10\r\n\r\n  data.topItems.forEach((item:any) => {\r\n    doc.text(`${item[0]} - Sold ${item[1]}`, 20, y)\r\n    y += 8\r\n  })\r\n\r\n  doc.save(\"IceSpot_Daily_Report.pdf\")\r\n}\r\n\r\n\r\n  const topItemsData = data.topItems.map((i:any)=>({\r\n  name: i[0],   // real item name\r\n  sold: i[1]\r\n}))\r\n\r\n\r\n  return (\r\n    <div style={{padding:40}}>\r\n      <h1>üìä Ice Spot Owner Dashboard</h1>\r\n<button onClick={exportPDF}>‚¨á Export PDF</button>\r\n\r\n      <h2>Today Summary</h2>\r\n      <p>Total Sales: ‚Çπ{data.todayTotal}</p>\r\n      <p>Total Bills: {data.todayBills}</p>\r\n\r\n      <hr/>\r\n\r\n      <h2>Payment Split</h2>\r\n      <PieChart width={300} height={250}>\r\n        <Pie data={paymentData} dataKey=\"value\" outerRadius={100}>\r\n          <Cell fill=\"#00C49F\"/>\r\n          <Cell fill=\"#8884d8\"/>\r\n        </Pie>\r\n        <Tooltip/>\r\n      </PieChart>\r\n\r\n      <hr/>\r\n\r\n      <h2>Weekly vs Monthly Sales</h2>\r\n      <BarChart width={400} height={250} data={salesData}>\r\n        <XAxis dataKey=\"name\"/>\r\n        <YAxis/>\r\n        <Tooltip/>\r\n        <Bar dataKey=\"sales\" fill=\"#82ca9d\"/>\r\n      </BarChart>\r\n\r\n      <hr/>\r\n\r\n      <h2>Top Selling Items üç¶</h2>\r\n<ul>\r\n  {data.topItems.map((i:any)=>(\r\n    <li key={i[0]}>\r\n      {i[0]} ‚Äî Sold {i[1]}\r\n    </li>\r\n  ))}\r\n</ul>\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}